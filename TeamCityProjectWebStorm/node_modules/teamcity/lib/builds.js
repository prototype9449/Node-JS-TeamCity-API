(function() {
  module.exports = function(client) {
    var build, builds, children;
    children = function(locator) {
      return {
        buildLog: function(cb) {
          if (locator.compile) {
            throw new Error('Can only get build log by id');
          } else {
            return client._get('/downloadBuildLog.html', {
              buildId: locator
            });
          }
        }
      };
    };
    build = function(locator, cb) {
      var id;
      if (locator.compile) {
        return client._get('/app/rest/builds', {
          locator: locator.compile()
        }, cb);
      } else {
        id = locator;
        return client._get("/app/rest/builds/" + id, cb);
      }
    };
    builds = function(locator, cb) {
      if (typeof locator === 'function') {
        cb = locator;
        return client._get('/app/rest/builds', cb);
      }
      if (cb && typeof cb === 'function') {
        return build(locator, cb);
      } else {
        return children(locator);
      }
    };
    return builds;
  };

}).call(this);
